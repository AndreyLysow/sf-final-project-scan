"use strict";(self.webpackChunksf_finproject_scan=self.webpackChunksf_finproject_scan||[]).push([[766],{2548:function(e,s,t){t.r(s),t.d(s,{default:function(){return f}});var a=t(1413),i=t(2791),n=t(7257),c=t(7689),r=t(8640),o=t(9513),l=t.n(o),h=(t(8639),t(4441));var u=t.p+"static/media/quick-search.247428b49900a7c75b5ebbf82b34d6ca.svg";var m=t.p+"static/media/green-dct.48b0f8953fb7bae80ca114a0937a6a34.svg";var d=t.p+"static/media/dct-folders.98a104f1c1d57adce085f580a73efcc0.svg",k=t(184),f=(0,n.Pi)((function(){var e=(0,c.s0)(),s=(0,r.cI)({mode:"onBlur",defaultValues:{inn:"7710474375"}}),t=s.register,n=s.handleSubmit,o=s.formState,f=o.errors,y=o.isValid;return(0,i.useEffect)((function(){!h.Z.token&&e("/auth")})),(0,i.useEffect)((function(){h.Z.resetSearchFormChecks()})),(0,k.jsxs)("div",{className:"search",children:[(0,k.jsx)("h1",{className:"search-title",children:"\u041d\u0430\u0439\u0434\u0438\u0442\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 \u043f\u0430\u0440\u0443 \u043a\u043b\u0438\u043a\u043e\u0432."}),(0,k.jsxs)("p",{className:"search-details",children:["\u0417\u0430\u0434\u0430\u0439\u0442\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u043e\u0438\u0441\u043a\u0430. ",(0,k.jsx)("br",{}),"\u0427\u0435\u043c \u0431\u043e\u043b\u044c\u0448\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435, \u0442\u0435\u043c \u0442\u043e\u0447\u043d\u0435\u0435 \u043f\u043e\u0438\u0441\u043a"]}),(0,k.jsxs)("div",{className:"search-container",children:[(0,k.jsxs)("form",{className:"search-form",onSubmit:n((function(s){h.Z.setSummaryError(!1),h.Z.setInn(s.inn),h.Z.setLimit(s.limit),h.Z.getHistograms(),h.Z.setDocument([]),h.Z.setIDs({}),h.Z.getIDs(),e("/result")})),children:[(0,k.jsxs)("div",{className:"search-form__inputs",children:[(0,k.jsxs)("label",{className:"search-form__label",children:["\u0418\u041d\u041d \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 *",(0,k.jsx)("input",(0,a.Z)({className:"search-form__input ".concat(null!==f&&void 0!==f&&f.inn?"search-form__input-invalid":""),placeholder:"10 \u0446\u0438\u0444\u0440"},t("inn",{required:!0,minLength:10,maxLength:10,pattern:{value:/^[0-9]{10}$/}}))),(null===f||void 0===f?void 0:f.inn)&&(0,k.jsx)("p",{className:"search-form__error-message",children:"required"===f.inn.type?"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435":"minLength"===f.inn.type?"\u041d\u0435 \u043c\u0435\u043d\u0435\u0435 10 \u0446\u0438\u0444\u0440":"maxLength"===f.inn.type?"\u041d\u0435 \u0431\u043e\u043b\u0435\u0435 10 \u0446\u0438\u0444\u0440":"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]}),(0,k.jsxs)("label",{className:"search-form__label",children:["\u0422\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c",(0,k.jsxs)("select",{className:"search-form__input",onChange:function(e){h.Z.setTonality(e.target.value)},children:[(0,k.jsx)("option",{value:"any",children:"\u041b\u044e\u0431\u0430\u044f"}),(0,k.jsx)("option",{value:"positive",children:"\u041f\u043e\u0437\u0438\u0442\u0438\u0432\u043d\u0430\u044f"}),(0,k.jsx)("option",{value:"negative",children:"\u041d\u0435\u0433\u0430\u0442\u0438\u0432\u043d\u0430\u044f"})]})]}),(0,k.jsxs)("label",{className:"search-form__label",children:["\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u0432 \u0432\u044b\u0434\u0430\u0447\u0435 *",(0,k.jsx)("input",(0,a.Z)({type:"number",className:"search-form__input ".concat(null!==f&&void 0!==f&&f.limit?"search-form__input-invalid":""),placeholder:"\u041e\u0442 1 \u0434\u043e 1000"},t("limit",{required:!0,min:1,max:1e3}))),(null===f||void 0===f?void 0:f.limit)&&(0,k.jsx)("p",{className:"search-form__error-message",children:"required"===f.limit.type?"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435":"min"===f.limit.type?"\u041d\u0435 \u043c\u0435\u043d\u0435\u0435 1":"\u041d\u0435 \u0431\u043e\u043b\u0435\u0435 1000"})]}),(0,k.jsxs)("div",{className:"date-picker__wrapper",children:[(0,k.jsx)("p",{className:"search-form__label",children:"\u0414\u0438\u0430\u043f\u0430\u0437\u043e\u043d \u043f\u043e\u0438\u0441\u043a\u0430 *"}),(0,k.jsxs)("div",{className:"date-picker",children:[(0,k.jsxs)("div",{className:"date-picker__label",children:[(0,k.jsx)(l(),{id:"startDate",selectsStart:!0,required:!0,className:"search-form__input dates",startDate:h.Z.startDate,dateFormat:"dd.MM.yyyy",selected:h.Z.startDate,maxDate:h.Z.endDate,onChange:function(e){h.Z.setStartDate(e)},fixedHeight:!0,showYearDropdown:!0}),(0,k.jsx)("label",{className:"required-info",htmlFor:"startDate",children:"\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430"})]}),(0,k.jsxs)("div",{className:"date-picker__label",children:[(0,k.jsx)(l(),{selectsEnd:!0,required:!0,className:"search-form__input dates",startDate:h.Z.startDate,dateFormat:"dd.MM.yyyy",selected:h.Z.endDate,minDate:h.Z.startDate,maxDate:new Date,onChange:function(e){h.Z.setEndDate(e)},fixedHeight:!0,showYearDropdown:!0}),(0,k.jsx)("label",{className:"required-info",htmlFor:"startDate",children:"\u0414\u0430\u0442\u0430 \u043a\u043e\u043d\u0446\u0430"})]})]})]})]}),(0,k.jsxs)("div",{className:"search-form__checks-wrapper",children:[(0,k.jsxs)("div",{className:"search-form__checks",children:[(0,k.jsxs)("div",{className:"search-form__check",children:[(0,k.jsx)("input",{id:"fullness",type:"checkbox",onChange:function(){return h.Z.setSearchFormChecks("isFullness")}}),(0,k.jsx)("label",{htmlFor:"fullness",className:"checks-label",children:"\u041f\u0440\u0438\u0437\u043d\u0430\u043a \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u043f\u043e\u043b\u043d\u043e\u0442\u044b"})]}),(0,k.jsxs)("div",{className:"search-form__check",children:[(0,k.jsx)("input",{id:"business",type:"checkbox",onChange:function(){return h.Z.setSearchFormChecks("isBusiness")}}),(0,k.jsx)("label",{htmlFor:"business",className:"checks-label",children:"\u0423\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u044f \u0432 \u0431\u0438\u0437\u043d\u0435\u0441-\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435"})]}),(0,k.jsxs)("div",{className:"search-form__check",children:[(0,k.jsx)("input",{id:"main-role",type:"checkbox",onChange:function(){return h.Z.setSearchFormChecks("isMainRole")}}),(0,k.jsx)("label",{htmlFor:"main-role",className:"checks-label",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f \u0440\u043e\u043b\u044c \u0432 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438"})]}),(0,k.jsxs)("div",{className:"search-form__check",children:[(0,k.jsx)("input",{id:"risk",type:"checkbox",onChange:function(){return h.Z.setSearchFormChecks("isRisksOnly")}}),(0,k.jsx)("label",{htmlFor:"risk",className:"checks-label",children:"\u041f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0441 \u0440\u0438\u0441\u043a-\u0444\u0430\u043a\u0442\u043e\u0440\u0430\u043c\u0438"})]}),(0,k.jsxs)("div",{className:"search-form__check",children:[(0,k.jsx)("input",{id:"tech-news",type:"checkbox",onChange:function(){return h.Z.setSearchFormChecks("isTechNews")}}),(0,k.jsx)("label",{htmlFor:"tech-news",className:"checks-label",children:"\u0412\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043d\u043e\u0432\u043e\u0441\u0442\u0438 \u0440\u044b\u043d\u043a\u043e\u0432"})]}),(0,k.jsxs)("div",{className:"search-form__check",children:[(0,k.jsx)("input",{id:"announcement",type:"checkbox",onChange:function(){return h.Z.setSearchFormChecks("isAnnouncement")}}),(0,k.jsx)("label",{htmlFor:"announcement",className:"checks-label",children:"\u0412\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0430\u043d\u043e\u043d\u0441\u044b \u0438 \u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u0438"})]}),(0,k.jsxs)("div",{className:"search-form__check",children:[(0,k.jsx)("input",{id:"news",type:"checkbox",onChange:function(){return h.Z.setSearchFormChecks("isNews")}}),(0,k.jsx)("label",{htmlFor:"news",className:"checks-label",children:"\u0412\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0441\u0432\u043e\u0434\u043a\u0438 \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439"})]})]}),(0,k.jsxs)("div",{className:"search-form__button",children:[(0,k.jsx)("button",{disabled:!y,className:"form-button__submit",type:"submit",children:"\u041f\u043e\u0438\u0441\u043a"}),(0,k.jsx)("p",{className:"required-info",children:"* \u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043a \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044e \u043f\u043e\u043b\u044f"})]})]})]}),(0,k.jsxs)("div",{className:"search-images",children:[(0,k.jsx)("img",{src:m,alt:"document",className:"doc-img"}),(0,k.jsx)("img",{src:d,alt:"folders",className:"folders-img"}),(0,k.jsx)("img",{src:u,alt:"quickSearch",className:"quickSearch-img"})]})]})]})}))},4441:function(e,s,t){var a=t(3433),i=t(5671),n=t(3144),c=t(1243),r="https://gateway.scan-interfax.ru",o=t(4098).makeAutoObservable,l=new(function(){function e(){(0,i.Z)(this,e),this.login="",this.password="",this.token="",this.isAuthError=!1,this.isLoading=!1,this.isCompaniesLoading=!1,this.isSummaryLoading=!1,this.isDocumentLoading=!1,this.companiesInfo={used:0,limit:0},this.inn=null,this.tonality="any",this.limit=0,this.startDate=new Date,this.endDate=new Date,this.summaryDates=[],this.summaryTotal=[],this.summaryRisks=[],this.summaryAll=0,this.isSummaryError=!1,this.IDs={},this.document=[],this.searchFormChecks={isFullness:!1,isBusiness:!1,isMainRole:!1,isRisksOnly:!1,isTechNews:!1,isAnnouncement:!1,isNews:!1},o(this)}return(0,n.Z)(e,[{key:"setLogin",value:function(e){this.login=e}},{key:"setPassword",value:function(e){this.password=e}},{key:"setToken",value:function(e){this.token=e,c.Z.interceptors.request.use((function(s){return s.headers.Authorization="Bearer ".concat(e),s}),(function(e){return Promise.reject(e)}))}},{key:"setAuthError",value:function(e){this.isAuthError=e}},{key:"setLoading",value:function(e){this.isLoading=e}},{key:"setCompaniesLoading",value:function(e){this.isCompaniesLoading=e}},{key:"setSummaryLoading",value:function(e){this.isSummaryLoading=e}},{key:"setDocumentLoading",value:function(e){this.isDocumentLoading=e}},{key:"setCompanyLimits",value:function(e,s){this.companiesInfo.used=e,this.companiesInfo.limit=s}},{key:"setInn",value:function(e){this.inn=e}},{key:"setTonality",value:function(e){this.tonality=e}},{key:"setLimit",value:function(e){this.limit=e}},{key:"setStartDate",value:function(e){this.startDate=e}},{key:"setEndDate",value:function(e){this.endDate=e}},{key:"setSummaryResult",value:function(e){this.summaryResult=e}},{key:"setSummaryDates",value:function(e){this.summaryDates=e}},{key:"setSummaryTotal",value:function(e){this.summaryTotal=e}},{key:"setSummaryRisks",value:function(e){this.summaryRisks=e}},{key:"setSummaryAll",value:function(e){this.summaryAll=e}},{key:"setSummaryError",value:function(e){this.isSummaryError=e}},{key:"setIDs",value:function(e){this.IDs=e}},{key:"setDocument",value:function(e){this.document=e}},{key:"setSearchFormChecks",value:function(e){switch(e){case"isFullness":this.searchFormChecks.isFullness=!this.searchFormChecks.isFullness;break;case"isBusiness":this.searchFormChecks.isBusiness=!this.searchFormChecks.isBusiness;break;case"isMainRole":this.searchFormChecks.isMainRole=!this.searchFormChecks.isMainRole;break;case"isRisksOnly":this.searchFormChecks.isRisksOnly=!this.searchFormChecks.isRisksOnly;break;case"isTechNews":this.searchFormChecks.isTechNews=!this.searchFormChecks.isTechNews;break;case"isAnnouncement":this.searchFormChecks.isAnnouncement=!this.searchFormChecks.isAnnouncement;break;case"isNews":this.searchFormChecks.isNews=!this.searchFormChecks.isNews}}},{key:"resetSearchFormChecks",value:function(){for(var e in this.searchFormChecks)this.searchFormChecks[e]=!1}},{key:"getToken",value:function(){var e=this;this.setLoading(!0),c.Z.post(r+"/api/v1/account/login",{login:this.login,password:this.password}).then((function(s){if(200===s.status){e.setToken(s.data.accessToken),localStorage.setItem("token",s.data.accessToken),localStorage.setItem("login",e.login),e.setLoading(!1);var t=new Date,a=new Date(t);a.setDate(t.getDate()+2),localStorage.setItem("expire",a)}})).catch((function(s){console.log(s),s.response?401===s.response.status&&e.setAuthError(!0):console.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438:",s.message),e.setLoading(!1),e.setToken(""),e.setLogin(""),e.setPassword("")}))}},{key:"checkToken",value:function(){""!==localStorage.getItem("token")&&localStorage.getItem("expire")>new Date?this.setToken(localStorage.getItem("token")):localStorage.clear()}},{key:"getCompaniesInfo",value:function(){var e=this;this.setCompaniesLoading(!0),c.Z.get(r+"/api/v1/account/info",{headers:{Authorization:"Bearer ".concat(this.token)}}).then((function(s){e.setCompanyLimits(s.data.eventFiltersInfo.usedCompanyCount,s.data.eventFiltersInfo.companyLimit),e.setCompaniesLoading(!1)})).catch((function(e){console.log(e)}))}},{key:"getHistograms",value:function(){var e=this;this.setSummaryLoading(!0),c.Z.post(r+"/api/v1/objectsearch/histograms",{issueDateInterval:{startDate:this.startDate,endDate:this.endDate},searchContext:{targetSearchEntitiesContext:{targetSearchEntities:[{type:"company",sparkId:null,entityId:null,inn:this.inn,maxFullness:this.searchFormChecks.isFullness,inBusinessNews:this.searchFormChecks.isBusiness}],onlyMainRole:this.searchFormChecks.isMainRole,tonality:this.tonality,onlyWithRiskFactors:this.searchFormChecks.isRisksOnly,riskFactors:{and:[],or:[],not:[]},themes:{and:[],or:[],not:[]}},themesFilter:{and:[],or:[],not:[]}},searchArea:{includedSources:[],excludedSources:[],includedSourceGroups:[],excludedSourceGroups:[]},attributeFilters:{excludeAnnouncements:this.searchFormChecks.isAnnouncement,excludeDigests:this.searchFormChecks.isNews},similarMode:"duplicates",limit:this.limit,sortType:"issueDate",sortDirectionType:"desc",intervalType:"month",histogramTypes:["totalDocuments","riskFactors"]}).then((function(s){e.setSummaryResult(s),200===e.summaryResult.status&&null!==e.summaryResult.data.data&&Array.isArray(e.summaryResult.data.data)&&0!==e.summaryResult.data.data.length||e.setSummaryError(!0),e.setSummaryLoading(!1)})).catch((function(s){e.setSummaryError(!0),console.log(s),e.setSummaryLoading(!1)}))}},{key:"getIDs",value:function(){var e=this;c.Z.post(r+"/api/v1/objectsearch",{issueDateInterval:{startDate:this.startDate,endDate:this.endDate},searchContext:{targetSearchEntitiesContext:{targetSearchEntities:[{type:"company",sparkId:null,entityId:null,inn:this.inn,maxFullness:this.searchFormChecks.isFullness,inBusinessNews:this.searchFormChecks.isBusiness}],onlyMainRole:this.searchFormChecks.isMainRole,tonality:this.tonality,onlyWithRiskFactors:this.searchFormChecks.isRisksOnly,riskFactors:{and:[],or:[],not:[]},themes:{and:[],or:[],not:[]}},themesFilter:{and:[],or:[],not:[]}},searchArea:{includedSources:[],excludedSources:[],includedSourceGroups:[],excludedSourceGroups:[]},attributeFilters:{excludeTechNews:this.searchFormChecks.isTechNews,excludeAnnouncements:this.searchFormChecks.isAnnouncement,excludeDigests:this.searchFormChecks.isNews},similarMode:"duplicates",limit:this.limit,sortType:"issueDate",sortDirectionType:"desc",intervalType:"month",histogramTypes:["totalDocuments","riskFactors"]}).then((function(s){var t=[];s.data.items.map((function(e){return t.push(e.encodedId)})),e.setIDs(t)})).catch((function(e){console.log(e)}))}},{key:"getFirstDocuments",value:function(){var e=this;c.Z.post(r+"/api/v1/documents",{ids:this.IDs}).then((function(s){e.setDocument(s.data)})).catch((function(e){console.log(e)}))}},{key:"getNextDocuments",value:function(e){var s=this;this.setDocumentLoading(!0),c.Z.post(r+"/api/v1/documents",{ids:e}).then((function(e){s.setDocument([].concat((0,a.Z)(s.document),(0,a.Z)(e.data))),s.setDocumentLoading(!1)})).catch((function(e){console.log(e),s.setDocumentLoading(!1)}))}}]),e}());s.Z=l}}]);
//# sourceMappingURL=766.f6e3e950.chunk.js.map