"use strict";(self.webpackChunksf_finproject_scan=self.webpackChunksf_finproject_scan||[]).push([[704],{7704:function(e,s,t){t.r(s),t.d(s,{default:function(){return f}});var n=t(2791),a=t(1087),i=t(7257);var o=t.p+"static/media/logo-header.b3f122e8386ce88a8b6d2e95a34db198.svg",r=t(9439),c=t(4441);var u=t.p+"static/media/avatar.3c215848e59391aa803ca10231a71e22.svg",l=t(3286),h=t(184),m=(0,i.Pi)((function(){var e=(0,n.useState)(localStorage.getItem("login")||"\u0413\u043e\u0441\u0442\u044c"),s=(0,r.Z)(e,2),t=s[0],i=s[1];return(0,n.useEffect)((function(){c.Z.checkToken(),c.Z.getCompaniesInfo()}),[]),(0,n.useEffect)((function(){var e=localStorage.getItem("login");e&&i(e)}),[]),(0,h.jsxs)("div",{className:"authUser",children:[(0,h.jsx)("div",{className:"companies-wrapper",children:c.Z.isCompaniesLoading?(0,h.jsx)(l.Z,{}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("p",{className:"companies-info",children:["\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u043e \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0439",(0,h.jsx)("span",{className:"companies-number",children:c.Z.companiesInfo.used})]}),(0,h.jsxs)("p",{className:"companies-info",children:["\u041b\u0438\u043c\u0438\u0442 \u043f\u043e \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044f\u043c",(0,h.jsx)("span",{className:"companies-number companies-number__limit",children:c.Z.companiesInfo.limit})]})]})}),(0,h.jsxs)("div",{className:"user-info",children:[(0,h.jsx)("span",{className:"username",children:t}),(0,h.jsx)("button",{className:"logout",onClick:function(){c.Z.setToken(""),localStorage.clear(),i("\u0413\u043e\u0441\u0442\u044c")},children:(0,h.jsx)(a.rU,{className:"header-nav__link",to:"/",children:"\u0412\u044b\u0439\u0442\u0438"})})]}),(0,h.jsx)("img",{className:"user-avatar",src:u,alt:"user avatar"})]})})),d=function(){return(0,h.jsxs)("div",{className:"not-signed",children:[(0,h.jsx)(a.rU,{className:"sign-up",to:"/error",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),(0,h.jsx)("div",{className:"line"}),(0,h.jsx)(a.rU,{className:"sign-in",to:"/auth",children:"\u0412\u043e\u0439\u0442\u0438"})]})},k=t(7201),g=(0,i.Pi)((function(){var e=(0,n.useState)(!1),s=(0,r.Z)(e,2),t=s[0],i=s[1],o=localStorage.getItem("login");return(0,n.useEffect)((function(){c.Z.checkToken(),c.Z.getCompaniesInfo()}),[]),(0,h.jsx)("div",{className:"menu-button__open",onClick:function(){return i(!0)},children:t?(0,h.jsxs)("div",{className:"user-menu",children:[(0,h.jsxs)("div",{className:"menu-top",children:[(0,h.jsx)("img",{className:"menu-logo",src:k.Z,alt:""}),(0,h.jsx)("button",{className:"menu-button__close",onClick:function(e){e.stopPropagation(),i(!1)}})]}),(0,h.jsxs)("nav",{className:"menu-nav",children:[(0,h.jsx)(a.rU,{className:"menu-nav__link",to:"/",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),(0,h.jsx)("a",{className:"menu-nav__link",href:"#prices",children:"\u0422\u0430\u0440\u0438\u0444\u044b"}),(0,h.jsx)(a.rU,{className:"menu-nav__link",to:"/error",children:"FAQ"})]}),c.Z.token?(0,h.jsxs)("div",{className:"menu__user-info",children:[(0,h.jsx)("span",{className:"menu__username",children:o}),(0,h.jsx)("img",{className:"menu__user-avatar",src:u,alt:"user avatar"}),(0,h.jsx)("button",{className:"menu__logout",onClick:function(){c.Z.setToken(""),localStorage.clear()},children:(0,h.jsx)(a.rU,{to:"/",children:"\u0412\u044b\u0439\u0442\u0438"})})]}):(0,h.jsxs)("div",{className:"menu__not-signed",children:[(0,h.jsx)(a.rU,{className:"menu__sign-up",to:"/error",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),(0,h.jsx)(a.rU,{className:"menu__sign-in",to:"/auth",children:"\u0412\u043e\u0439\u0442\u0438"})]})]}):(0,h.jsx)(h.Fragment,{})})})),f=(0,i.Pi)((function(){return(0,n.useEffect)((function(){c.Z.checkToken()}),[]),(0,h.jsxs)("header",{className:"header",children:[(0,h.jsx)(a.rU,{to:"/",className:"header-logo",children:(0,h.jsx)("img",{src:o,alt:"logo"})}),(0,h.jsxs)("nav",{className:"header-nav",children:[(0,h.jsx)(a.rU,{to:"/",className:"header-nav__link",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),(0,h.jsx)("a",{href:"#prices",className:"header-nav__link",children:"\u0422\u0430\u0440\u0438\u0444\u044b"}),(0,h.jsx)(a.rU,{to:"/error",className:"header-nav__link",children:"FAQ"})]}),(0,h.jsxs)("div",{className:"header-right",children:[c.Z.token?(0,h.jsx)(m,{}):(0,h.jsx)(d,{}),(0,h.jsx)(g,{})]})]})}))},3286:function(e,s,t){t.d(s,{Z:function(){return a}});t(2791);var n=t(184);var a=function(){return(0,n.jsxs)("div",{className:"run",children:[(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{})]})}},4441:function(e,s,t){var n=t(3433),a=t(5671),i=t(3144),o=t(1243),r="https://gateway.scan-interfax.ru",c=t(4098).makeAutoObservable,u=new(function(){function e(){(0,a.Z)(this,e),this.login="",this.password="",this.token="",this.isAuthError=!1,this.isLoading=!1,this.isCompaniesLoading=!1,this.isSummaryLoading=!1,this.isDocumentLoading=!1,this.companiesInfo={used:0,limit:0},this.inn=null,this.tonality="any",this.limit=0,this.startDate=new Date,this.endDate=new Date,this.summaryDates=[],this.summaryTotal=[],this.summaryRisks=[],this.summaryAll=0,this.isSummaryError=!1,this.IDs={},this.document=[],this.searchFormChecks={isFullness:!1,isBusiness:!1,isMainRole:!1,isRisksOnly:!1,isTechNews:!1,isAnnouncement:!1,isNews:!1},c(this)}return(0,i.Z)(e,[{key:"setLogin",value:function(e){this.login=e}},{key:"setPassword",value:function(e){this.password=e}},{key:"setToken",value:function(e){this.token=e,o.Z.interceptors.request.use((function(s){return s.headers.Authorization="Bearer ".concat(e),s}),(function(e){return Promise.reject(e)}))}},{key:"setAuthError",value:function(e){this.isAuthError=e}},{key:"setLoading",value:function(e){this.isLoading=e}},{key:"setCompaniesLoading",value:function(e){this.isCompaniesLoading=e}},{key:"setSummaryLoading",value:function(e){this.isSummaryLoading=e}},{key:"setDocumentLoading",value:function(e){this.isDocumentLoading=e}},{key:"setCompanyLimits",value:function(e,s){this.companiesInfo.used=e,this.companiesInfo.limit=s}},{key:"setInn",value:function(e){this.inn=e}},{key:"setTonality",value:function(e){this.tonality=e}},{key:"setLimit",value:function(e){this.limit=e}},{key:"setStartDate",value:function(e){this.startDate=e}},{key:"setEndDate",value:function(e){this.endDate=e}},{key:"setSummaryResult",value:function(e){this.summaryResult=e}},{key:"setSummaryDates",value:function(e){this.summaryDates=e}},{key:"setSummaryTotal",value:function(e){this.summaryTotal=e}},{key:"setSummaryRisks",value:function(e){this.summaryRisks=e}},{key:"setSummaryAll",value:function(e){this.summaryAll=e}},{key:"setSummaryError",value:function(e){this.isSummaryError=e}},{key:"setIDs",value:function(e){this.IDs=e}},{key:"setDocument",value:function(e){this.document=e}},{key:"setSearchFormChecks",value:function(e){switch(e){case"isFullness":this.searchFormChecks.isFullness=!this.searchFormChecks.isFullness;break;case"isBusiness":this.searchFormChecks.isBusiness=!this.searchFormChecks.isBusiness;break;case"isMainRole":this.searchFormChecks.isMainRole=!this.searchFormChecks.isMainRole;break;case"isRisksOnly":this.searchFormChecks.isRisksOnly=!this.searchFormChecks.isRisksOnly;break;case"isTechNews":this.searchFormChecks.isTechNews=!this.searchFormChecks.isTechNews;break;case"isAnnouncement":this.searchFormChecks.isAnnouncement=!this.searchFormChecks.isAnnouncement;break;case"isNews":this.searchFormChecks.isNews=!this.searchFormChecks.isNews}}},{key:"resetSearchFormChecks",value:function(){for(var e in this.searchFormChecks)this.searchFormChecks[e]=!1}},{key:"getToken",value:function(){var e=this;this.setLoading(!0),o.Z.post(r+"/api/v1/account/login",{login:this.login,password:this.password}).then((function(s){if(200===s.status){e.setToken(s.data.accessToken),localStorage.setItem("token",s.data.accessToken),localStorage.setItem("login",e.login),e.setLoading(!1);var t=new Date,n=new Date(t);n.setDate(t.getDate()+2),localStorage.setItem("expire",n)}})).catch((function(s){console.log(s),s.response?401===s.response.status&&e.setAuthError(!0):console.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438:",s.message),e.setLoading(!1),e.setToken(""),e.setLogin(""),e.setPassword("")}))}},{key:"checkToken",value:function(){""!==localStorage.getItem("token")&&localStorage.getItem("expire")>new Date?this.setToken(localStorage.getItem("token")):localStorage.clear()}},{key:"getCompaniesInfo",value:function(){var e=this;this.setCompaniesLoading(!0),o.Z.get(r+"/api/v1/account/info",{headers:{Authorization:"Bearer ".concat(this.token)}}).then((function(s){e.setCompanyLimits(s.data.eventFiltersInfo.usedCompanyCount,s.data.eventFiltersInfo.companyLimit),e.setCompaniesLoading(!1)})).catch((function(e){console.log(e)}))}},{key:"getHistograms",value:function(){var e=this;this.setSummaryLoading(!0),o.Z.post(r+"/api/v1/objectsearch/histograms",{issueDateInterval:{startDate:this.startDate,endDate:this.endDate},searchContext:{targetSearchEntitiesContext:{targetSearchEntities:[{type:"company",sparkId:null,entityId:null,inn:this.inn,maxFullness:this.searchFormChecks.isFullness,inBusinessNews:this.searchFormChecks.isBusiness}],onlyMainRole:this.searchFormChecks.isMainRole,tonality:this.tonality,onlyWithRiskFactors:this.searchFormChecks.isRisksOnly,riskFactors:{and:[],or:[],not:[]},themes:{and:[],or:[],not:[]}},themesFilter:{and:[],or:[],not:[]}},searchArea:{includedSources:[],excludedSources:[],includedSourceGroups:[],excludedSourceGroups:[]},attributeFilters:{excludeAnnouncements:this.searchFormChecks.isAnnouncement,excludeDigests:this.searchFormChecks.isNews},similarMode:"duplicates",limit:this.limit,sortType:"issueDate",sortDirectionType:"desc",intervalType:"month",histogramTypes:["totalDocuments","riskFactors"]}).then((function(s){e.setSummaryResult(s),200===e.summaryResult.status&&null!==e.summaryResult.data.data&&Array.isArray(e.summaryResult.data.data)&&0!==e.summaryResult.data.data.length||e.setSummaryError(!0),e.setSummaryLoading(!1)})).catch((function(s){e.setSummaryError(!0),console.log(s),e.setSummaryLoading(!1)}))}},{key:"getIDs",value:function(){var e=this;o.Z.post(r+"/api/v1/objectsearch",{issueDateInterval:{startDate:this.startDate,endDate:this.endDate},searchContext:{targetSearchEntitiesContext:{targetSearchEntities:[{type:"company",sparkId:null,entityId:null,inn:this.inn,maxFullness:this.searchFormChecks.isFullness,inBusinessNews:this.searchFormChecks.isBusiness}],onlyMainRole:this.searchFormChecks.isMainRole,tonality:this.tonality,onlyWithRiskFactors:this.searchFormChecks.isRisksOnly,riskFactors:{and:[],or:[],not:[]},themes:{and:[],or:[],not:[]}},themesFilter:{and:[],or:[],not:[]}},searchArea:{includedSources:[],excludedSources:[],includedSourceGroups:[],excludedSourceGroups:[]},attributeFilters:{excludeTechNews:this.searchFormChecks.isTechNews,excludeAnnouncements:this.searchFormChecks.isAnnouncement,excludeDigests:this.searchFormChecks.isNews},similarMode:"duplicates",limit:this.limit,sortType:"issueDate",sortDirectionType:"desc",intervalType:"month",histogramTypes:["totalDocuments","riskFactors"]}).then((function(s){var t=[];s.data.items.map((function(e){return t.push(e.encodedId)})),e.setIDs(t)})).catch((function(e){console.log(e)}))}},{key:"getFirstDocuments",value:function(){var e=this;o.Z.post(r+"/api/v1/documents",{ids:this.IDs}).then((function(s){e.setDocument(s.data)})).catch((function(e){console.log(e)}))}},{key:"getNextDocuments",value:function(e){var s=this;this.setDocumentLoading(!0),o.Z.post(r+"/api/v1/documents",{ids:e}).then((function(e){s.setDocument([].concat((0,n.Z)(s.document),(0,n.Z)(e.data))),s.setDocumentLoading(!1)})).catch((function(e){console.log(e),s.setDocumentLoading(!1)}))}}]),e}());s.Z=u}}]);
//# sourceMappingURL=704.109e69e2.chunk.js.map