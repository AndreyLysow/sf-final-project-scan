"use strict";(self.webpackChunksf_finproject_scan=self.webpackChunksf_finproject_scan||[]).push([[482],{6400:function(s,e,t){t.r(e),t.d(e,{default:function(){return f}});var i=t(2791),a=t(4441);var n=t.p+"static/media/target-hit.abe5cf0a97c6d797c5b2ce62c6fb0ae2.svg",r=t(7257),o=t(7689),c=t(1413),l=t(5717),u=(t(3037),t(8688),t(3286)),h=t(184),m={dots:!1,infinite:!1,slidesToShow:8,slidesToScroll:3,responsive:[{breakpoint:1200,settings:{slidesToShow:6,slidesToScroll:2}},{breakpoint:1e3,settings:{slidesToShow:5,slidesToScroll:2}},{breakpoint:940,settings:{slidesToShow:3,slidesToScroll:2}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:1}},{breakpoint:550,settings:{slidesToShow:1,slidesToScroll:1}}]},d=function(){var s=a.Z.summaryResult.data.data[0].data.map((function(s){return s.date.substring(0,10).split("-").join(".").split(".").reverse().join(".")})),e=a.Z.summaryResult.data.data[0].data.map((function(s){return s.value})),t=a.Z.summaryResult.data.data[1].data.map((function(s){return s.value}));return a.Z.setSummaryDates(s),a.Z.setSummaryTotal(e),a.Z.setSummaryRisks(t),a.Z.setSummaryAll(a.Z.summaryTotal.reduce((function(s,e){return s+e}))+a.Z.summaryRisks.reduce((function(s,e){return s+e}))),(0,h.jsx)("div",{children:!0===a.Z.isSummaryLoading?(0,h.jsxs)("div",{className:"slider-loader",children:[(0,h.jsx)(u.Z,{}),(0,h.jsx)("p",{className:"loading-data",children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435"})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("h3",{className:"summary-title",children:"\u041e\u0431\u0449\u0430\u044f \u0441\u0432\u043e\u0434\u043a\u0430"}),(0,h.jsxs)("p",{className:"summary-all",children:["\u041d\u0430\u0439\u0434\u0435\u043d\u043e ",a.Z.summaryAll," \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u043e\u0432"]}),(0,h.jsxs)("div",{className:"slider-wrapper",children:[(0,h.jsxs)("div",{className:"slider-titles",children:[(0,h.jsx)("p",{children:"\u041f\u0435\u0440\u0438\u043e\u0434"}),(0,h.jsx)("p",{children:"\u0412\u0441\u0435\u0433\u043e"}),(0,h.jsx)("p",{children:"\u0420\u0438\u0441\u043a\u0438"})]}),(0,h.jsx)(l.Z,(0,c.Z)((0,c.Z)({className:"result-slider"},m),{},{children:s&&s.map((function(s,e){return(0,h.jsxs)("div",{className:"slider-item",id:e,children:[(0,h.jsxs)("p",{children:[" ",a.Z.summaryDates[e]," "]}),(0,h.jsxs)("p",{children:[" ",a.Z.summaryTotal[e]," "]}),(0,h.jsxs)("p",{children:[" ",a.Z.summaryRisks[e]," "]})]})}))}))]})]})})},k=t(9439),y=t(1087);var p=t.p+"static/media/img-vc-ru.431e8855d10d26d790e99350ac0929f2.svg",g=(0,r.Pi)((function(){var s=(0,i.useState)(!0),e=(0,k.Z)(s,2),t=e[0],n=e[1],r=(0,i.useState)(10),o=(0,k.Z)(r,2),c=o[0],l=o[1];(0,i.useEffect)((function(){c>=a.Z.IDs.length&&n(!1)}),[c]),(0,i.useEffect)((function(){if(n(!1),void 0!==a.Z.IDs[0]){if(a.Z.IDs.length<=10)return a.Z.getFirstDocuments(),void n(!1);var s=a.Z.IDs.slice(0,c);a.Z.getNextDocuments(s),n(!0)}}),[a.Z.IDs]);return a.Z.document?(0,h.jsxs)("div",{className:"documents-wrapper",children:[(0,h.jsx)("h3",{className:"summary-title documents-title",children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432"}),(0,h.jsx)("div",{className:"documents",children:a.Z.document&&a.Z.document.map((function(s){return(0,h.jsx)(v,{issueDate:s.ok.issueDate.substring(0,10).split("-").join(".").split(".").reverse().join("."),source:s.ok.source.name,title:s.ok.title.text,isTechNews:s.ok.attributes.isTechNews,isAnnouncement:s.ok.attributes.isAnnouncement,isDigest:s.ok.attributes.isDigest,content:s.ok.content.markup,link:s.ok.url,wordCount:s.ok.attributes.wordCount})}))}),a.Z.isDocumentLoading?(0,h.jsx)("button",{disabled:!0,className:"document-button__active",children:(0,h.jsx)(u.Z,{})}):(0,h.jsx)("button",{className:t?"document-button__active":"document-disabled",onClick:function(){var s=a.Z.IDs.slice(c,c+10);a.Z.getNextDocuments(s),l(c+10)},children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435"})]}):(n(!1),(0,h.jsxs)("p",{className:"search-result__error search-result-error__info",children:["\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :( ",(0,h.jsx)("br",{}),"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 ",(0,h.jsx)(y.rU,{to:"/search",children:"\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u043e\u0438\u0441\u043a\u0430"})]}))})),v=function(s){var e=s.content.match(/https?:\/\/\S+"/g)||[],t=e.length?e[0].replace('"',""):p,i=s.content.replace(/<.*?>/g,"").replace(/;.*?;/g,"").replace(/&.*?t/g,"").replace(/s.*?;/g,"").replace(/\?.*?\d/g,"").replace(/\/.*?\s/g,"").replace(/(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})([/\w .-]*)/g,"");return(0,h.jsxs)("div",{className:"doc",children:[(0,h.jsxs)("div",{className:"doc-top",children:[(0,h.jsx)("p",{className:"issue-date",children:s.issueDate.substring(0,10).split("-").join(".").split(".").reverse().join(".")}),(0,h.jsx)(y.rU,{className:"issue-date",to:s.link,target:"_blank",children:s.source})]}),(0,h.jsxs)("div",{className:"doc__title-tag",children:[(0,h.jsx)("h3",{className:"doc-title",children:s.title}),s.isTechNews&&(0,h.jsx)("span",{className:"doc-tag",children:"\u0422\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043d\u043e\u0432\u043e\u0441\u0442\u0438"}),s.isAnnouncement&&(0,h.jsx)("span",{className:"doc-tag announcement",children:"\u0410\u043d\u043e\u043d\u0441\u044b \u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u044f"}),s.isDigest&&(0,h.jsx)("span",{className:"doc-tag news",children:"\u0421\u0432\u043e\u0434\u043a\u0438 \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439"})]}),(0,h.jsx)("img",{className:"document-img",src:t,alt:""}),(0,h.jsx)("p",{className:"doc-content",children:i}),(0,h.jsxs)("div",{className:"doc-bottom",children:[(0,h.jsx)(y.rU,{className:"doc-link",to:s.link,target:"_blank",children:"\u0427\u0438\u0442\u0430\u0442\u044c \u0432 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0435"}),(0,h.jsxs)("span",{className:"issue-date",children:["\u0421\u043b\u043e\u0432\u0430: ",s.wordCount]})]})]})},f=(0,r.Pi)((function(){var s=(0,o.s0)();return(0,i.useEffect)((function(){!a.Z.token&&s("/auth")})),(0,h.jsxs)("div",{className:"search-result",children:[(0,h.jsxs)("div",{className:"search-result__top",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h1",{className:"search-title search-result__title",children:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430"}),a.Z.isSummaryLoading?(0,h.jsxs)("p",{className:"search-details",children:["\u041f\u043e\u0438\u0441\u043a \u043c\u043e\u0436\u0435\u0442 \u0437\u0430\u043d\u044f\u0442\u044c \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0432\u0440\u0435\u043c\u044f, ",(0,h.jsx)("br",{}),"\u043f\u0440\u043e\u0441\u0438\u043c \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u044c \u0442\u0435\u0440\u043f\u0435\u043d\u0438\u0435."]}):(0,h.jsxs)("p",{className:"search-details",children:["\u041f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0430\u0439\u0434\u0435\u043d\u044b ",(0,h.jsx)("br",{})," \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435."]})]}),(0,h.jsx)("img",{src:n,className:"search-result__img",alt:"woman with loupe"})]}),a.Z.isSummaryError?(0,h.jsxs)("p",{className:"search-result__error search-result-error__info",children:["\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a :( ",(0,h.jsx)("br",{}),"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 ",(0,h.jsx)(y.rU,{to:"/search",children:"\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u043e\u0438\u0441\u043a\u0430"})]}):(0,h.jsxs)("div",{children:[a.Z.isSummaryLoading?(0,h.jsxs)("div",{className:"slider-loader",children:[(0,h.jsx)(u.Z,{}),(0,h.jsx)("p",{className:"loading-data",children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435"})]}):(0,h.jsx)(d,{}),(0,h.jsx)(g,{})]})]})}))},3286:function(s,e,t){t.d(e,{Z:function(){return a}});t(2791);var i=t(184);var a=function(){return(0,i.jsxs)("div",{className:"run",children:[(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{})]})}},4441:function(s,e,t){var i=t(3433),a=t(5671),n=t(3144),r=t(1243),o="https://gateway.scan-interfax.ru",c=t(4098).makeAutoObservable,l=new(function(){function s(){(0,a.Z)(this,s),this.login="",this.password="",this.token="",this.isAuthError=!1,this.isLoading=!1,this.isCompaniesLoading=!1,this.isSummaryLoading=!1,this.isDocumentLoading=!1,this.companiesInfo={used:0,limit:0},this.inn=null,this.tonality="any",this.limit=0,this.startDate=new Date,this.endDate=new Date,this.summaryDates=[],this.summaryTotal=[],this.summaryRisks=[],this.summaryAll=0,this.isSummaryError=!1,this.IDs={},this.document=[],this.searchFormChecks={isFullness:!1,isBusiness:!1,isMainRole:!1,isRisksOnly:!1,isTechNews:!1,isAnnouncement:!1,isNews:!1},c(this)}return(0,n.Z)(s,[{key:"setLogin",value:function(s){this.login=s}},{key:"setPassword",value:function(s){this.password=s}},{key:"setToken",value:function(s){this.token=s,r.Z.interceptors.request.use((function(e){return e.headers.Authorization="Bearer ".concat(s),e}),(function(s){return Promise.reject(s)}))}},{key:"setAuthError",value:function(s){this.isAuthError=s}},{key:"setLoading",value:function(s){this.isLoading=s}},{key:"setCompaniesLoading",value:function(s){this.isCompaniesLoading=s}},{key:"setSummaryLoading",value:function(s){this.isSummaryLoading=s}},{key:"setDocumentLoading",value:function(s){this.isDocumentLoading=s}},{key:"setCompanyLimits",value:function(s,e){this.companiesInfo.used=s,this.companiesInfo.limit=e}},{key:"setInn",value:function(s){this.inn=s}},{key:"setTonality",value:function(s){this.tonality=s}},{key:"setLimit",value:function(s){this.limit=s}},{key:"setStartDate",value:function(s){this.startDate=s}},{key:"setEndDate",value:function(s){this.endDate=s}},{key:"setSummaryResult",value:function(s){this.summaryResult=s}},{key:"setSummaryDates",value:function(s){this.summaryDates=s}},{key:"setSummaryTotal",value:function(s){this.summaryTotal=s}},{key:"setSummaryRisks",value:function(s){this.summaryRisks=s}},{key:"setSummaryAll",value:function(s){this.summaryAll=s}},{key:"setSummaryError",value:function(s){this.isSummaryError=s}},{key:"setIDs",value:function(s){this.IDs=s}},{key:"setDocument",value:function(s){this.document=s}},{key:"setSearchFormChecks",value:function(s){switch(s){case"isFullness":this.searchFormChecks.isFullness=!this.searchFormChecks.isFullness;break;case"isBusiness":this.searchFormChecks.isBusiness=!this.searchFormChecks.isBusiness;break;case"isMainRole":this.searchFormChecks.isMainRole=!this.searchFormChecks.isMainRole;break;case"isRisksOnly":this.searchFormChecks.isRisksOnly=!this.searchFormChecks.isRisksOnly;break;case"isTechNews":this.searchFormChecks.isTechNews=!this.searchFormChecks.isTechNews;break;case"isAnnouncement":this.searchFormChecks.isAnnouncement=!this.searchFormChecks.isAnnouncement;break;case"isNews":this.searchFormChecks.isNews=!this.searchFormChecks.isNews}}},{key:"resetSearchFormChecks",value:function(){for(var s in this.searchFormChecks)this.searchFormChecks[s]=!1}},{key:"getToken",value:function(){var s=this;this.setLoading(!0),r.Z.post(o+"/api/v1/account/login",{login:this.login,password:this.password}).then((function(e){if(200===e.status){s.setToken(e.data.accessToken),localStorage.setItem("token",e.data.accessToken),localStorage.setItem("login",s.login),s.setLoading(!1);var t=new Date,i=new Date(t);i.setDate(t.getDate()+2),localStorage.setItem("expire",i)}})).catch((function(e){console.log(e),e.response?401===e.response.status&&s.setAuthError(!0):console.error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438:",e.message),s.setLoading(!1),s.setToken(""),s.setLogin(""),s.setPassword("")}))}},{key:"checkToken",value:function(){""!==localStorage.getItem("token")&&localStorage.getItem("expire")>new Date?this.setToken(localStorage.getItem("token")):localStorage.clear()}},{key:"getCompaniesInfo",value:function(){var s=this;this.setCompaniesLoading(!0),r.Z.get(o+"/api/v1/account/info",{headers:{Authorization:"Bearer ".concat(this.token)}}).then((function(e){s.setCompanyLimits(e.data.eventFiltersInfo.usedCompanyCount,e.data.eventFiltersInfo.companyLimit),s.setCompaniesLoading(!1)})).catch((function(s){console.log(s)}))}},{key:"getHistograms",value:function(){var s=this;this.setSummaryLoading(!0),r.Z.post(o+"/api/v1/objectsearch/histograms",{issueDateInterval:{startDate:this.startDate,endDate:this.endDate},searchContext:{targetSearchEntitiesContext:{targetSearchEntities:[{type:"company",sparkId:null,entityId:null,inn:this.inn,maxFullness:this.searchFormChecks.isFullness,inBusinessNews:this.searchFormChecks.isBusiness}],onlyMainRole:this.searchFormChecks.isMainRole,tonality:this.tonality,onlyWithRiskFactors:this.searchFormChecks.isRisksOnly,riskFactors:{and:[],or:[],not:[]},themes:{and:[],or:[],not:[]}},themesFilter:{and:[],or:[],not:[]}},searchArea:{includedSources:[],excludedSources:[],includedSourceGroups:[],excludedSourceGroups:[]},attributeFilters:{excludeAnnouncements:this.searchFormChecks.isAnnouncement,excludeDigests:this.searchFormChecks.isNews},similarMode:"duplicates",limit:this.limit,sortType:"issueDate",sortDirectionType:"desc",intervalType:"month",histogramTypes:["totalDocuments","riskFactors"]}).then((function(e){s.setSummaryResult(e),200===s.summaryResult.status&&null!==s.summaryResult.data.data&&Array.isArray(s.summaryResult.data.data)&&0!==s.summaryResult.data.data.length||s.setSummaryError(!0),s.setSummaryLoading(!1)})).catch((function(e){s.setSummaryError(!0),console.log(e),s.setSummaryLoading(!1)}))}},{key:"getIDs",value:function(){var s=this;r.Z.post(o+"/api/v1/objectsearch",{issueDateInterval:{startDate:this.startDate,endDate:this.endDate},searchContext:{targetSearchEntitiesContext:{targetSearchEntities:[{type:"company",sparkId:null,entityId:null,inn:this.inn,maxFullness:this.searchFormChecks.isFullness,inBusinessNews:this.searchFormChecks.isBusiness}],onlyMainRole:this.searchFormChecks.isMainRole,tonality:this.tonality,onlyWithRiskFactors:this.searchFormChecks.isRisksOnly,riskFactors:{and:[],or:[],not:[]},themes:{and:[],or:[],not:[]}},themesFilter:{and:[],or:[],not:[]}},searchArea:{includedSources:[],excludedSources:[],includedSourceGroups:[],excludedSourceGroups:[]},attributeFilters:{excludeTechNews:this.searchFormChecks.isTechNews,excludeAnnouncements:this.searchFormChecks.isAnnouncement,excludeDigests:this.searchFormChecks.isNews},similarMode:"duplicates",limit:this.limit,sortType:"issueDate",sortDirectionType:"desc",intervalType:"month",histogramTypes:["totalDocuments","riskFactors"]}).then((function(e){var t=[];e.data.items.map((function(s){return t.push(s.encodedId)})),s.setIDs(t)})).catch((function(s){console.log(s)}))}},{key:"getFirstDocuments",value:function(){var s=this;r.Z.post(o+"/api/v1/documents",{ids:this.IDs}).then((function(e){s.setDocument(e.data)})).catch((function(s){console.log(s)}))}},{key:"getNextDocuments",value:function(s){var e=this;this.setDocumentLoading(!0),r.Z.post(o+"/api/v1/documents",{ids:s}).then((function(s){e.setDocument([].concat((0,i.Z)(e.document),(0,i.Z)(s.data))),e.setDocumentLoading(!1)})).catch((function(s){console.log(s),e.setDocumentLoading(!1)}))}}]),s}());e.Z=l}}]);
//# sourceMappingURL=482.b45fafe5.chunk.js.map